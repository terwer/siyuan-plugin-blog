# zhi

ğŸ›ï¸ ä¸€æ¬¾æºè‡ªçŸ¥ä¹ä¸”è‡ªå¸¦æ’ä»¶å’Œåšå®¢çš„æ€æºç¬”è®°ä¸»é¢˜

## ä¸»é¢˜å±•ç¤º

### æµ…è‰²é£æ ¼

![](https://static.terwergreen.com/test/202303050157804.png)

### æš—é»‘é£æ ¼

![](https://static.terwergreen.com/test/202303050156263.png)

### åšå®¢ä¸»é¡µ

![](https://static.terwergreen.com/test/202303052323466.png)

âš ï¸ ç‰¹åˆ«æé†’ 1: `1.0.0` ä¸ºå‰æœŸå¯ç”¨ç‰ˆæœ¬ï¼ŒåŠŸèƒ½ä¸Šå°šä¸å…¨é¢ï¼Œä»…ä½œä¸ºæµ‹è¯•ä½¿ç”¨ï¼Œæ¬¢è¿ issue
æå‡ºå®è´µæ„è§ã€‚æ­¤ç‰ˆæœ¬ç‰¹æ€§ï¼Œè¯·å‚ç…§ [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§) ã€‚

âš ï¸ ç‰¹åˆ«æé†’ 2: æ’ä»¶ç³»ç»Ÿé»˜è®¤ä¸º `å®‰å…¨æ¨¡å¼` ï¼Œæ‰€æœ‰æ’ä»¶ç¦ç”¨ï¼Œéœ€è¦ç‚¹å‡»å³ä¸Šè§’è®¾ç½®èœå•å…³é—­å®‰å…¨æ¨¡å¼ï¼Œæ‰èƒ½å¼€å¯æ’ä»¶ç³»ç»Ÿã€‚

âš ï¸ ç‰¹åˆ«æé†’ 3: æ‰€æœ‰æ’ä»¶é»˜è®¤å…³é—­ï¼Œéœ€è¦æ‰‹åŠ¨åœ¨æ’ä»¶åˆ—è¡¨å¼€å¯å¯¹åº”æ’ä»¶æ‰èƒ½ä½¿ç”¨ï¼Œç›®å‰å†…ç½®å¯ç”¨çš„æ’ä»¶å¦‚ä¸‹ï¼š

- ç³»ç»Ÿè®¾ç½®æ’ä»¶ï¼ˆæ’ä»¶ç³»ç»Ÿå†…ç½®ï¼‰
- ç¤ºä¾‹æ’ä»¶-éœ€æ‰‹åŠ¨å¼€å¯
- å›¾ç‰‡èƒŒæ™¯è‡ªåŠ¨é€æ˜æ’ä»¶-éœ€æ‰‹åŠ¨å¼€å¯
- æ€æºç¬”è®°å‘å¸ƒå·¥å…·é›†æˆæ’ä»¶-éœ€æ‰‹åŠ¨å¼€å¯
- åšå®¢æ’ä»¶-éœ€æ‰‹åŠ¨å¼€å¯
- æ›´å¤šæ’ä»¶å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…...

## ç‰ˆæœ¬é€‚é…

æ€æºç¬”è®° <sup>2.7.6+</sup>

## æ ¸å¿ƒç‰¹æ€§

- ä¸»é¢˜çµæ„Ÿæºè‡ªäºçŸ¥ä¹ä½†ä¸é™äºçŸ¥ä¹é£æ ¼ï¼Œå¤–è§‚ä¼˜åŒ–åŒ…æ‹¬ä¸é™äºï¼š

  - å­—ä½“æ ·å¼ç¾åŒ–ï¼Œè‹±æ–‡ä»¥ `Open Sans` ä¸ºä¸»ï¼Œ ä¸­æ–‡ä»¥ `è½éœå­¤é¹œ` ä¸ºä¸»
  - èƒŒæ™¯è‰²ä¼˜åŒ–
  - ä»£ç å—ç¾åŒ–ï¼Œç±»ä¼¼ `Mac` çª—å£é£æ ¼

- æ•´åˆçƒ­é—¨æŒ‚ä»¶ä»¥åŠå…¶ä»–å°å·¥å…·ï¼Œæä¾›ç»Ÿä¸€çš„å…¥å£

  - é›†æˆ `sy-post-publisher` æ€æºç¬”è®°å‘å¸ƒå·¥å…·ï¼Œæ— éœ€æ‰‹åŠ¨æ·»åŠ æŒ‚ä»¶ï¼Œæ— éœ€æ·»åŠ  js ç‰‡æ®µï¼Œå¼€ç®±å³ç”¨

    æ³¨æ„ï¼š`sy-post-publisher` éœ€è¦å•ç‹¬åœ¨é›†å¸‚æŒ‚ä»¶ä¸‹è½½

- å¤©ç”Ÿæ”¯æŒæ’ä»¶ç³»ç»Ÿï¼Œæ’ä»¶ç³»ç»Ÿç”±ç¤¾åŒºå¼€å‘è€…æä¾›æ”¯æŒ

  - æ–‡æ¡£å›¾ç‰‡èƒŒæ™¯è‡ªåŠ¨é€æ˜æ’ä»¶
  - åšå®¢æ’ä»¶

- åŒæ—¶æå®šä¸»é¢˜ä¸é¢„è§ˆï¼Œå®‰è£…äº† zhi ä¸»é¢˜ç›¸å½“äºé¢å¤–å®‰è£…äº†ä¸€ä¸ªæ’ä»¶ç³»ç»Ÿï¼Œä¸€ä¸ªåœ¨çº¿åšå®¢

  åšå®¢ä¸»é¡µï¼šhttp://127.0.0.1:6806/appearance/themes/zhi/dist/pages/

  æŒ‚ä»¶ç‰ˆåšå®¢ç®¡ç†ä¸å‘å¸ƒä¸»é¡µï¼šhttp://127.0.0.1:6806/widgets/sy-post-publisher/blog/?from=siyuanNewWin

æ³¨æ„äº‹é¡¹ï¼šæ’ä»¶ç³»ç»Ÿä¸ºç¤¾åŒºçƒ­å¿ƒå¼€å‘è€…æä¾›ï¼Œè¯·è¯¦ç»†äº†è§£ç›¸å…³æœºåˆ¶ä¹‹åå†ä½¿ç”¨ã€‚

## ç‰ˆæœ¬è§„åˆ’

## 1.1.x

- [ ] åšå®¢æƒé™æ§åˆ¶

## å¿«é€Ÿä¸Šæ‰‹

ç›´æ¥åœ¨æ€æºç¬”è®° `é›†å¸‚` ä¸‹è½½ `zhi` ä¸»é¢˜ï¼Œç„¶ååœ¨ <kbd>è®¾ç½®</kbd> - <kbd>å¤–è§‚</kbd> - <kbd>ä¸»é¢˜</kbd> é€‰æ‹© `zhi` ä¸»é¢˜å³å¯

## æœ¬åœ°è°ƒè¯•

1. ä¸‹è½½å‹ç¼©åŒ…ï¼Œè§£å‹åˆ°ä¸»é¢˜ç›®å½•ã€‚ä¸»é¢˜ç›®å½•åœ¨ <kbd>è®¾ç½®</kbd> - <kbd>å¤–è§‚</kbd> - <kbd>ä¸»é¢˜</kbd> - <kbd>æ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹</kbd>

2. å®‰è£…ä¾èµ–ï¼Œæ„å»ºé¡¹ç›®

```bash
npm i -g pnpm
pnpm install
pnpm build
```

3. <kbd>è®¾ç½®</kbd> - <kbd>å¤–è§‚</kbd> - <kbd>ä¸»é¢˜</kbd> é€‰æ‹© `zhi` ä¸»é¢˜å³å¯

## npm å‘åŒ…

```bash
# éªŒè¯æ‰“åŒ…
npm pack

# æœ¬åœ°éªŒè¯
npm publish --dry-run

# å‘å¸ƒåˆ°ä»“åº“
npm publish
```

## æŒ‚è½½çš„ window å¯¹è±¡

```bash
window.pluginSystem
```

## é¡¹ç›®ç»“æ„

Vite + React + TypeScript + SWC

```
â”œâ”€â”€ README.md
â”œâ”€â”€ config
â”‚Â Â  â”œâ”€â”€ plugins
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ vite.cjs.config.zhi-demo-plugin.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ vite.cjs.config.zhi-picture-plugin.ts
â”‚Â Â  â””â”€â”€ vite.cjs.config.plugin.system.hook.ts
â”œâ”€â”€ dist
â”‚Â Â  â”œâ”€â”€ chunk
â”‚Â Â  â”œâ”€â”€ fonts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ jb-mono.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lxgw.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ opensans.css
â”‚Â Â  â”‚Â Â  â””â”€â”€ times.css
â”‚Â Â  â”œâ”€â”€ icons
â”‚Â Â  â”‚Â Â  â””â”€â”€ fontawesome
â”‚Â Â  â”œâ”€â”€ index.html
â”‚Â Â  â””â”€â”€ static
â”œâ”€â”€ dist-cjs
â”‚Â Â  â”œâ”€â”€ fonts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ jb-mono.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lxgw.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ opensans.css
â”‚Â Â  â”‚Â Â  â””â”€â”€ times.css
â”‚Â Â  â”œâ”€â”€ icons
â”‚Â Â  â”‚Â Â  â””â”€â”€ fontawesome
â”‚Â Â  â”œâ”€â”€ plugin-system
â”‚Â Â  â”‚Â Â  â””â”€â”€ plugin-system-hook.js
â”‚Â Â  â”œâ”€â”€ theme.js
â”‚Â Â  â””â”€â”€ zhi-plugins
â”‚Â Â      â”œâ”€â”€ zhi-demo-plugin
â”‚Â Â      â””â”€â”€ zhi-picture-plugin
â”‚Â Â      â””â”€â”€ zhi-publisher-plugin
â”œâ”€â”€ index.html å†…ç½®æ–‡ç« é¢„è§ˆç­‰åŠŸèƒ½çš„ç»Ÿä¸€å…¥å£
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ public
â”‚Â Â  â”œâ”€â”€ fonts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ jb-mono.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lxgw.css
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ opensans.css
â”‚Â Â  â”‚Â Â  â””â”€â”€ times.css
â”‚Â Â  â””â”€â”€ icons
â”‚Â Â      â””â”€â”€ fontawesome
â”œâ”€â”€ script
â”‚Â Â  â”œâ”€â”€ build.py
â”‚Â Â  â”œâ”€â”€ cjs.py
â”‚Â Â  â”œâ”€â”€ css.py
â”‚Â Â  â”œâ”€â”€ esm.py
â”‚Â Â  â”œâ”€â”€ scriptutils.py
â”‚Â Â  â”œâ”€â”€ version.py
â”‚Â Â  â”œâ”€â”€ zhi-demo-plugin.py
â”‚Â Â  â”œâ”€â”€ zhi-picture-plugin.py
â”‚Â Â  â””â”€â”€ zhi-publisher-plugin.py
â”œâ”€â”€ src æºç æ ¹è·¯å¾„ï¼Œé™¤éç‰¹åˆ«è¯´æ˜ï¼Œå‡å‚ä¸ç¼–è¯‘ç±»å‹æ£€æŸ¥
â”‚Â Â  â”œâ”€â”€ adaptor
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ default
â”‚Â Â  â”‚Â Â  â””â”€â”€ rm
â”‚Â Â  â”œâ”€â”€ apps
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ blog
â”‚Â Â  â”‚Â Â  â””â”€â”€ zhi
â”‚Â Â  â”‚Â Â  â”‚Â Â â””â”€â”€ plugin-system æ’ä»¶ç³»ç»Ÿ
â”‚Â Â  â”‚Â Â  â”‚Â Â â””â”€â”€ vendor ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œä¾‹å¦‚
â”‚Â Â  â”‚Â Â  â”‚Â Â â””â”€â”€ zhi-plugins zhiä¸»é¢˜æ’ä»¶æºç ç›®å½•
â”‚Â Â  â”‚Â Â  â”‚Â Â â”‚Â Â â””â”€â”€ zhi-demo-plugin      ç¤ºä¾‹æ’ä»¶
â”‚Â Â  â”‚Â Â  â”‚Â Â â”‚Â Â â””â”€â”€ zhi-picture-plugin   å›¾ç‰‡èƒŒæ™¯é€æ˜æ’ä»¶
â”‚Â Â  â”‚Â Â  â”‚Â Â â”‚Â Â â””â”€â”€ zhi-publisher-plugin å‘å¸ƒå·¥å…·é›†æˆæ’ä»¶
â”‚Â Â  â”œâ”€â”€ assets
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ react.svg
â”‚Â Â  â”‚Â Â  â””â”€â”€ vite.svg
â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â””â”€â”€ DependencyItem.ts
â”‚Â Â  â”œâ”€â”€ styles
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ blog
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ common
â”‚Â Â  â”‚Â Â  â””â”€â”€ zhi
â”‚Â Â  â”œâ”€â”€ theme.ts
â”‚Â Â  â””â”€â”€ utils
â”‚Â Â      â”œâ”€â”€ cjsUtil.ts
â”‚Â Â      â”œâ”€â”€ enums
â”‚Â Â      â”œâ”€â”€ logUtil.ts
â”‚Â Â      â”œâ”€â”€ nodeUtil.ts
â”‚Â Â      â”œâ”€â”€ otherlib
â”‚Â Â      â”œâ”€â”€ strUtil.ts
â”‚Â Â      â””â”€â”€ sysUtil.ts
â”œâ”€â”€ test
â”‚Â Â  â””â”€â”€ zhi-theme.test.ts
â”œâ”€â”€ theme.css
â”œâ”€â”€ theme.js
â”œâ”€â”€ theme.json
â”œâ”€â”€ theme.styl
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â”œâ”€â”€ typings
â”‚Â Â  â”œâ”€â”€ custom.d.ts
â”‚Â Â  â””â”€â”€ vite-env.d.ts
â”œâ”€â”€ vite.cjs.config.ts
â””â”€â”€ vite.config.ts
```

## æ„Ÿè°¢

æ„Ÿè°¢ [zuoez02](https://github.com/zuoez02/siyuan-plugin-system) æä¾›çš„æ’ä»¶ç³»ç»Ÿ
